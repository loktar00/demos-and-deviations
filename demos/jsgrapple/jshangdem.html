<!doctype html> <html> 	<head> 		<title>JS1k, 1k demo submission [id]</title> 		<meta charset="utf-8" /> 	</head> 	<body> 		<canvas id="c"></canvas> 		<script> 			(function(){			var w = 256,h = 512,				canvas,ctx,				m=Math,				r=m.random,				pi=3.14,				i,plats=[],x,y,oY,sX,sY,connected,dx,dy,dist,vx,vy,locked,start,gX,gY,angle,xAngle,gShoot,score,xSize=80,				draw = function(){						ctx.clearRect(0,0,w,h);					ctx.fillText(score, 5, 15);										// Draw the blocks					for(i=0;i<3;i++){						if(plats[i].y>h){plats[i].x=r()*186;plats[i].y=0;};						ctx.fillRect(plats[i].x,(locked)?plats[i].y-=vy*4:plats[i].y,xSize,15);					}					// Draw the wee lil ninja man					ctx.fillRect(x,y,5,5);										if(start){						//If we are connected and the screen is locked then increase the bricks position						if(locked){sY-=vy*4;score++;}						xSize=80-score/65;						dx=x-sX;						dy=y-sY;												dist = m.sqrt(dx * dx + dy * dy);												if(connected&&y>sY+20){							ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(sX,sY);ctx.stroke();									console.log(dist*30);							vx+=(sX-x)/(dist*30);							vy+=(sY-y)/(dist*30);						}else{							connected=false;						}											// If we are shooting our grapple						if(gShoot){							gX+=m.cos(xAngle*.017) * 15;							gY-=m.sin(angle*-.017) * 15;														ctx.fillRect(gX,gY,4,4);														// Check all of the possible platforms and see if we hit any of them							for(i=0;i<3;i++){								if(gX>plats[i].x&&gX<plats[i].x+xSize&&gY>plats[i].y&&gY<plats[i].y+15){									connected=true;									gShoot=false;									sX = gX;									sY = gY;									return;								}								connected=false;							}														(gY<0)?gShoot=false:1;							(gX>w||gX<0)?xAngle-=angle:1;						}												(vy>0)?locked=false:locked;						vy+=.01;						(locked)?y:y+=vy*4;						x+=vx; 						// If we go too high lock the screen so the platforms scroll instead						(y<170)?locked=true:y;												// If we go too low end the game						(y>h)?start=false:1;												// Bounce side to side						(x<0||x>w)?vx=-vx:1;					}				}				canvas = document.body.children.c;				canvas.width = w;				canvas.height = h;				ctx = canvas.getContext("2d");				x=128;				y=432;				// Set the initial positions of the platforms				for(i=0;i<3;i++){plats[i]={x:r()*186,y:170*i}}				start=score=vy=vx=0;								canvas.onclick = function(evt){					if(!gShoot){						start=true;							gX = x;gY = y;												dx=(evt.clientX-gX);						dy=(evt.clientY-gY);						angle=m.atan2(dy, dx)*180/pi;						xAngle=angle;						(angle>-170&&angle<-10)?gShoot=true:1;					}				}								setInterval(function(){draw()}, 10);						})(); 		</script> 	</body> </html>